# .env.example
# Azure Spot VM Manager - Environment Variables Template
# Copy this file to .env and fill in your actual values

# =============================================================================
# WEBHOOK AUTHENTICATION
# =============================================================================
# API key for securing webhook communication between Python agent and Cloudflare Worker
# Generate with: openssl rand -hex 16
WEBHOOK_API_KEY=abc123def456ghi789jkl012mno345pq

# =============================================================================
# AZURE CREDENTIALS 
# =============================================================================
# Azure Service Principal credentials for VM management
# Create service principal: az ad sp create-for-rbac --name "spot-vm-manager"
AZURE_CLIENT_ID=12345678-1234-1234-1234-123456789abc
AZURE_CLIENT_SECRET=your-azure-client-secret-here
AZURE_TENANT_ID=87654321-4321-4321-4321-cba987654321
AZURE_SUBSCRIPTION_ID=11111111-2222-3333-4444-555555555555

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================
# Custom webhook URL for testing (defaults to production URL)
WEBHOOK_URL=https://your-worker-name.your-subdomain.workers.dev/webhook

# Log level for Python agent (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# =============================================================================
# CLOUDFLARE WORKER SECRETS SETUP
# =============================================================================
# These environment variables should be set as Cloudflare Worker secrets
# DO NOT put these in wrangler.toml - use wrangler secret commands instead
#
# Set secrets using Wrangler CLI:
#
# 1. Webhook API Key (REQUIRED):
#    wrangler secret put WEBHOOK_API_KEY --env queue
#    wrangler secret put WEBHOOK_API_KEY --env processor
#
# 2. Azure Credentials (for future VM restart functionality):
#    wrangler secret put AZURE_CLIENT_ID --env processor
#    wrangler secret put AZURE_CLIENT_SECRET --env processor
#    wrangler secret put AZURE_TENANT_ID --env processor
#    wrangler secret put AZURE_SUBSCRIPTION_ID --env processor
#
# 3. List all secrets:
#    wrangler secret list --env queue
#    wrangler secret list --env processor
#
# 4. Delete a secret (if needed):
#    wrangler secret delete WEBHOOK_API_KEY --env queue
#
# =============================================================================
# PYTHON AGENT SETUP
# =============================================================================
# For the Python monitoring agent running on your Azure VM:
#
# 1. Set environment variable:
#    export WEBHOOK_API_KEY="abc123def456ghi789jkl012mno345pq"
#
# 2. Or use command line argument:
#    python vm-monitor.py --api-key "abc123def456ghi789jkl012mno345pq"
#
# 3. For Windows:
#    set WEBHOOK_API_KEY=abc123def456ghi789jkl012mno345pq
#
# 4. For systemd service, add to service file:
#    Environment=WEBHOOK_API_KEY=abc123def456ghi789jkl012mno345pq
#
# =============================================================================
# SECURITY NOTES
# =============================================================================
# - Never commit .env file to git (it's in .gitignore)
# - Use different API keys for development vs production
# - Rotate API keys regularly
# - Use strong, random keys (minimum 32 characters)
# - Monitor webhook logs for unauthorized access attempts
#
# Generate secure API key:
# openssl rand -hex 16                    # 32 character hex
# python -c "import secrets; print(secrets.token_hex(16))"
# node -e "console.log(require('crypto').randomBytes(16).toString('hex'))"